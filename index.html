<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Manager - Web Application</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="decorator-styles.css" rel="stylesheet">
    <style>
        body {
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }
        
        .main-container {
            border-radius: 16px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            margin: 20px auto;
            padding: 32px;
            backdrop-filter: blur(20px);
        }
        
        /* Navigation Styles */
        .navbar {
            border-radius: 12px !important;
            padding: 16px 24px !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .navbar-brand {
            font-size: 1.5rem !important;
            font-weight: 700 !important;
        }
        
        .nav-link {
            font-weight: 500 !important;
            padding: 8px 16px !important;
            border-radius: 8px !important;
            transition: all 0.3s ease !important;
        }
        
        .nav-link:hover {
            background: rgba(102, 126, 234, 0.1) !important;
        }
        
          .nav-link.active {
             background: var(--btn-bg) !important;
          }
        
        /* Page Header */
        .page-header {
            margin-bottom: 32px;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .page-header p {
            font-size: 1.125rem;
            margin: 0;
        }
        
        /* Search Section */
        .search-section {
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        /* Button Styles */
        .btn-custom {
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-custom:hover {
            transform: translateY(-2px);
            color: white;
        }
        
        .btn-outline-light {
            border-radius: 8px;
            padding: 8px 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
          .btn-danger-custom {
             background: var(--btn-danger-bg) !important;
             border: none;
             border-radius: 6px;
             padding: 6px 12px;
             color: white;
             font-size: 0.75rem;
             transition: all 0.3s ease;
             box-shadow: var(--btn-danger-shadow) !important;
          }
        
        .btn-danger-custom:hover {
            transform: translateY(-1px);
            box-shadow: var(--btn-danger-hover-shadow) !important;
            color: white;
        }
        
          .btn-warning-custom {
             background: var(--btn-warning-bg) !important;
             border: none;
             border-radius: 6px;
             padding: 6px 12px;
             color: white;
             font-size: 0.75rem;
             transition: all 0.3s ease;
             box-shadow: var(--btn-warning-shadow) !important;
          }
        
        .btn-warning-custom:hover {
            transform: translateY(-1px);
            box-shadow: var(--btn-warning-hover-shadow) !important;
            color: white;
        }
        
        /* Table Styles */
        .table-custom {
            background: #0f172a;
            --bs-table-bg: #0f172a;
            --bs-table-striped-bg: #0f172a;
            --bs-table-hover-bg: #1f2937;
            --bs-table-color: #e2e8f0;
            --bs-table-border-color: #334155;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid #334155;
        }
        
        .table-custom thead {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
        }
        
        .table-custom th {
            border: none;
            padding: 16px 20px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.8rem;
            text-align: left;
        }
        
        .table-custom td {
            border: none;
            padding: 16px 20px;
            vertical-align: middle;
            border-bottom: 1px solid #334155;
            color: #e2e8f0;
            font-size: 0.9rem;
            background-color: transparent;
        }
        
        .table-custom tbody tr {
            background: #0f172a;
            color: #e2e8f0;
            transition: all 0.2s ease;
        }
        
        .table-custom tbody tr:nth-child(even) {
            background: #0f172a;
        }
        
        .table-custom tbody tr:hover {
            background: #1f2937;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .table-custom tbody tr:nth-child(even):hover {
            background: #1f2937;
        }
        
        .modal-content {
            border-radius: 20px;
            border: none;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            background: #1e293b;
            color: #e2e8f0;
        }
        
        .modal-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px 20px 0 0;
            border: none;
        }
        
        /* Form Controls */
        .form-control {
            border-radius: 8px;
            border: 1px solid #334155;
            padding: 12px 16px;
            transition: all 0.3s ease;
            background: #0f172a;
            color: #e2e8f0;
            font-size: 0.9rem;
        }
        
        .form-control:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
            background: #0f172a;
            color: #e2e8f0;
            outline: none;
        }
        
        .form-control::placeholder {
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        .form-label {
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 8px;
        }
        
        .alert-custom {
            border-radius: 15px;
            border: none;
            padding: 15px 20px;
            margin-bottom: 20px;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stats-card {
            border-radius: 15px;
            padding: 25px;
            color: white;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .stats-card h3 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #475569;
            color: #94a3b8;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }
        
        /* Pagination unify */
        .page-item .page-link {
            background: #0f172a;
            border-color: #334155;
            color: #e2e8f0;
        }
        .page-item .page-link:hover {
            background: #1f2937;
            border-color: #334155;
            color: #fff;
        }
        .page-item.active .page-link {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-color: transparent;
            color: #fff;
        }
        
        /* Inline style cleanups */
        .navbar-dark-soft {
            background: #0f172a;
            border-radius: 15px;
            padding: 15px 25px;
            border: 1px solid #334155;
        }
        .search-icon {
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            z-index: 10;
        }
        .muted-info {
            font-size: 0.9rem;
            color: #94a3b8;
        }
    </style>
</head>
<body>
    <!-- Theme Selector -->
    <div class="theme-selector" id="themeSelector" style="display: none;">
        <h6><i class="fas fa-palette"></i> Chọn Theme</h6>
        <div class="theme-buttons">
            <div class="theme-btn default active" onclick="changeTheme('default')" title="Default Theme"></div>
            <div class="theme-btn dark" onclick="changeTheme('dark')" title="Dark Theme"></div>
            <div class="theme-btn light" onclick="changeTheme('light')" title="Light Theme"></div>
            <div class="theme-btn neon" onclick="changeTheme('neon')" title="Neon Theme"></div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="main-container">
                    <!-- Navigation Header -->
                    <nav class="navbar navbar-expand-lg mb-4 navbar-dark-soft">
                        <div class="container-fluid">
                            <a class="navbar-brand text-white fw-bold" href="#">
                                <i class="fas fa-graduation-cap me-2"></i>EduSync Manager
                            </a>
                            <div class="navbar-nav ms-auto">
                                <a class="nav-link text-light me-3" href="#">Dashboard</a>
                                <a class="nav-link text-white fw-bold active" href="#">Students</a>
                                <a class="nav-link text-light ms-3" href="#">Analytics</a>
                            </div>
                            <div class="ms-3">
                                <button class="btn btn-outline-light btn-sm" onclick="toggleTheme()">
                                    <i class="fas fa-palette"></i> Themes
                                </button>
                            </div>
                        </div>
                    </nav>
                    
                    <!-- Page Header -->
                    <div class="page-header d-flex justify-content-between align-items-center">
            <div>
                            <h1>Student Management</h1>
                            <p>Manage your students efficiently</p>
            </div>
                        <div class="d-flex gap-3">
                            <button class="btn btn-custom" onclick="addStudent()">
                                <i class="fas fa-plus"></i>Add Student
                </button>
                            <button class="btn btn-custom" onclick="exportData()">
                                <i class="fas fa-download"></i>Export
                </button>
                            <button class="btn btn-custom" onclick="loadStudents()">
                                <i class="fas fa-sync-alt"></i>Refresh
                </button>
            </div>
        </div>

                    <!-- Stats -->
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="stats-card animated" id="statsCard1">
                                <h3><i class="fas fa-users"></i> <span id="totalStudents">0</span></h3>
                                <p>Tổng số sinh viên</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-card animated" id="statsCard2">
                                <h3><i class="fas fa-chart-line"></i> <span id="avgGpa">0.00</span></h3>
                                <p>GPA trung bình</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-card animated" id="statsCard3">
                                <h3><i class="fas fa-school"></i> <span id="numClasses">0</span></h3>
                                <p>Số lớp học</p>
                            </div>
            </div>
        </div>

        <!-- Search and Filter Section -->
                    <div class="search-section">
                        <div class="row align-items-end">
                            <div class="col-md-8">
                                <div class="position-relative">
                                    <i class="fas fa-search position-absolute search-icon"></i>
                                    <input type="text" class="form-control ps-5" id="searchInput" 
                                           placeholder="Search students...">
                    </div>
                </div>
                            <div class="col-md-4">
                                <select class="form-control" id="classFilter" aria-label="Filter by class" title="Filter by class">
                        <option value="">All Classes</option>
                                    <option value="CTK46">CTK46</option>
                                    <option value="CTK47">CTK47</option>
                                    <option value="CTK48">CTK48</option>
                    </select>
                </div>
            </div>
        </div>

                    <!-- Loading -->
                    <div class="loading" id="loading">
                        <div class="spinner-border" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2">Đang tải dữ liệu...</p>
                    </div>
                    
                    <!-- Students Table -->
                    <div class="table-responsive">
                        <table class="table table-custom">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>STUDENT NAME</th>
                                    <th>CLASS</th>
                                    <th>GPA</th>
                                    <th class="text-end">ACTIONS</th>
                        </tr>
                    </thead>
                            <tbody id="studentsTableBody">
                                <!-- Students will be loaded here -->
                            </tbody>
                </table>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="d-flex justify-content-between align-items-center mt-4">
                        <div class="text-light">
                            <span id="paginationInfo" class="muted-info">Showing 1 to 10 of 25 students</span>
                        </div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-light btn-sm" onclick="previousPage()">Previous</button>
                            <button class="btn btn-custom btn-sm active" onclick="goToPage(1)">1</button>
                            <button class="btn btn-outline-light btn-sm" onclick="goToPage(2)">2</button>
                            <button class="btn btn-outline-light btn-sm" onclick="nextPage()">Next</button>
            </div>
        </div>

                    <!-- Footer -->
                    <div class="footer">
                        <p>&copy; 2025 EduSync Manager Web Application. Được phát triển với Flask & Bootstrap.</p>
                    </div>
            </div>
            </div>
            </div>
        </div>
    
    <!-- Student Modal -->
    <div class="modal fade" id="studentModal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="studentModalLabel">
                        <i class="fas fa-user-plus"></i> Thêm sinh viên mới
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" title="Close" aria-label="Close"></button>
            </div>
                <div class="modal-body">
                    <form id="studentForm">
                        <div class="mb-3">
                            <label for="studentName" class="form-label">Tên sinh viên</label>
                            <input type="text" class="form-control" id="studentName" required>
                    </div>
                        <div class="mb-3">
                            <label for="studentClass" class="form-label">Lớp</label>
                            <input type="text" class="form-control" id="studentClass" required>
                    </div>
                        <div class="mb-3">
                            <label for="studentGpa" class="form-label">GPA</label>
                            <input type="number" class="form-control" id="studentGpa" step="0.01" min="0" max="4" required>
                    </div>
                </form>
            </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Hủy
                    </button>
                    <button type="button" class="btn btn-custom" id="saveStudentBtn" onclick="saveStudent()">
                        <i class="fas fa-save me-2"></i>Lưu sinh viên
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="decorators.js"></script>
    <script>
        // Global variables
        let students = [];
        let editingStudentId = null;
        let currentPage = 1;
        const studentsPerPage = 5;
        
        // Decorator Pattern Managers
        let themeManager;
        let animationManager;
        let notificationManager;

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Decorator Pattern Managers
            themeManager = new window.DecoratorPattern.ThemeManager();
            animationManager = new window.DecoratorPattern.AnimationManager();
            notificationManager = new window.DecoratorPattern.NotificationManager();
            
            // Load saved theme
            themeManager.loadSavedTheme();
            
            // Animate stats cards
            setTimeout(() => {
                const statsCards = document.querySelectorAll('.stats-card');
                statsCards.forEach((card, index) => {
                    setTimeout(() => {
                        animationManager.animate(card, 'fadeIn');
                    }, index * 200);
                });
            }, 500);
            
            loadStudents();
            
            // Event listeners for buttons
            document.getElementById('searchInput').addEventListener('input', filterAndPaginateStudents);
            document.getElementById('classFilter').addEventListener('change', filterAndPaginateStudents);
        });

        function getGPABadgeColor(gpa) {
            if (gpa >= 3.5) return 'linear-gradient(45deg, #10b981, #059669)';
            if (gpa >= 3.0) return 'linear-gradient(45deg, #f59e0b, #d97706)';
            return 'linear-gradient(45deg, #ef4444, #dc2626)';
        }

        async function loadStudents() {
            showLoading(true);
            try {
                // Load data from JSON file instead of API
                const response = await fetch('./data.json');
                students = await response.json();
                filterAndPaginateStudents();
            } catch (error) {
                showAlert('Error loading students: ' + error.message, 'danger');
            } finally {
                showLoading(false);
            }
        }

        function displayStudents(studentsToShow) {
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = '';
            
            if (studentsToShow.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center py-4">
                            <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
                            <p class="text-muted">No students found</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            studentsToShow.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="fw-bold" style="color: #667eea;">${student.id}</td>
                    <td class="fw-semibold" style="color: #e2e8f0;">${student.name}</td>
                    <td><span class="badge" style="background: linear-gradient(45deg, #3b82f6, #1d4ed8); color: white; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem;">${student.class_name}</span></td>
                    <td>
                        <span class="badge" style="background: ${getGPABadgeColor(student.gpa)}; color: white; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 600;">
                            ${student.gpa.toFixed(2)}
                        </span>
                    </td>
                    <td class="text-end">
                        <button class="btn btn-warning-custom btn-sm me-2" 
                                onclick="editStudent(${student.id})" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger-custom btn-sm" 
                                onclick="deleteStudent(${student.id})" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function filterAndPaginateStudents() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const classFilter = document.getElementById('classFilter').value;

            const filteredStudents = students.filter(student => {
                const matchesSearch = student.name.toLowerCase().includes(searchTerm) || 
                                      student.class_name.toLowerCase().includes(searchTerm);
                const matchesClass = classFilter === '' || student.class_name === classFilter;
                return matchesSearch && matchesClass;
            });

            const totalPages = Math.ceil(filteredStudents.length / studentsPerPage);
            currentPage = Math.min(currentPage, totalPages);
            currentPage = Math.max(1, currentPage);

            const startIndex = (currentPage - 1) * studentsPerPage;
            const endIndex = Math.min(startIndex + studentsPerPage, filteredStudents.length);
            const studentsToDisplay = filteredStudents.slice(startIndex, endIndex);

            displayStudents(studentsToDisplay);
            updatePaginationControls(filteredStudents.length, totalPages);
            updateStats(filteredStudents);
        }

        function updatePaginationControls(totalItems, totalPages) {
            const paginationInfo = document.getElementById('paginationInfo');
            const paginationButtonsContainer = document.querySelector('.d-flex.gap-2');
            paginationButtonsContainer.innerHTML = '';

            const startIndex = (currentPage - 1) * studentsPerPage;
            const endIndex = Math.min(startIndex + studentsPerPage, totalItems);

            if (totalItems === 0) {
                paginationInfo.textContent = 'Showing 0 of 0 students';
            } else {
                paginationInfo.textContent = `Showing ${startIndex + 1} to ${endIndex} of ${totalItems} students`;
            }

            // Previous button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'btn btn-outline-light btn-sm';
            prevBtn.textContent = 'Previous';
            prevBtn.disabled = currentPage === 1;
            prevBtn.onclick = () => {
                if (currentPage > 1) {
                    currentPage--;
                    filterAndPaginateStudents();
                }
            };
            paginationButtonsContainer.appendChild(prevBtn);

            // Page number buttons
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `btn btn-sm ${currentPage === i ? 'btn-custom' : 'btn-outline-light'}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => {
                    currentPage = i;
                    filterAndPaginateStudents();
                };
                paginationButtonsContainer.appendChild(pageBtn);
            }

            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'btn btn-outline-light btn-sm';
            nextBtn.textContent = 'Next';
            nextBtn.disabled = currentPage === totalPages || totalItems === 0;
            nextBtn.onclick = () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    filterAndPaginateStudents();
                }
            };
            paginationButtonsContainer.appendChild(nextBtn);
        }

        function updateStats(filteredStudents = students) {
            const totalStudents = filteredStudents.length;
            const avgGpa = totalStudents > 0 ? (filteredStudents.reduce((sum, s) => sum + s.gpa, 0) / totalStudents).toFixed(2) : '0.00';
            
            const uniqueClasses = new Set(filteredStudents.map(s => s.class_name));
            const numClasses = uniqueClasses.size;

            document.getElementById('totalStudents').textContent = totalStudents;
            document.getElementById('avgGpa').textContent = avgGpa;
            document.getElementById('numClasses').textContent = numClasses;
        }

        async function addStudent() {
            editingStudentId = null;
            document.getElementById('studentModalLabel').innerHTML = '<i class="fas fa-user-plus"></i> Thêm sinh viên mới';
            document.getElementById('studentForm').reset();
            new bootstrap.Modal(document.getElementById('studentModal')).show();
        }

        async function editStudent(id) {
            editingStudentId = id;
            const student = students.find(s => s.id === id);
            if (student) {
                document.getElementById('studentModalLabel').innerHTML = '<i class="fas fa-edit"></i> Chỉnh sửa sinh viên';
                document.getElementById('studentName').value = student.name;
                document.getElementById('studentClass').value = student.class_name;
                document.getElementById('studentGpa').value = student.gpa;
                new bootstrap.Modal(document.getElementById('studentModal')).show();
            }
        }

        async function saveStudent() {
            const name = document.getElementById('studentName').value.trim();
            const className = document.getElementById('studentClass').value;
            const gpa = parseFloat(document.getElementById('studentGpa').value);
            
            if (!name || !className || isNaN(gpa)) {
                showAlert('Vui lòng điền đầy đủ và chính xác các trường!', 'warning');
                return;
            }
            
            if (gpa < 0 || gpa > 4) {
                showAlert('GPA phải nằm trong khoảng từ 0 đến 4!', 'warning');
                return;
            }
            
            // For static version, we'll just show a message
            showAlert('Trong phiên bản static này, chức năng thêm/sửa sinh viên chỉ mang tính chất demo. Để có đầy đủ chức năng, vui lòng chạy phiên bản Flask.', 'info');
            
            const studentModal = bootstrap.Modal.getInstance(document.getElementById('studentModal'));
            if (studentModal) studentModal.hide();
        }

        async function deleteStudent(id) {
            const student = students.find(s => s.id === id);
            if (!student) return;
            
            if (!confirm(`Bạn có chắc chắn muốn xóa sinh viên "${student.name}"?`)) {
                return;
            }
            
            // For static version, we'll just show a message
            showAlert('Trong phiên bản static này, chức năng xóa sinh viên chỉ mang tính chất demo. Để có đầy đủ chức năng, vui lòng chạy phiên bản Flask.', 'info');
        }

        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        function showAlert(message, type) {
            // Remove existing alerts
            const existingAlerts = document.querySelectorAll('.alert-custom');
            existingAlerts.forEach(alert => alert.remove());
            
            // Create new alert
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-custom alert-dismissible fade show`;
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'exclamation-triangle' : 'info-circle'}"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            // Insert after navigation
            const nav = document.querySelector('nav');
            nav.insertAdjacentElement('afterend', alertDiv);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        function exportData() {
            notificationManager.show('Chức năng xuất dữ liệu sẽ được triển khai sớm!', 'info');
        }
        
        // Theme Management Functions
        function toggleTheme() {
            const themeSelector = document.getElementById('themeSelector');
            themeSelector.style.display = themeSelector.style.display === 'none' ? 'block' : 'none';
        }
        
        function changeTheme(themeName) {
            // Apply theme through manager
            themeManager.setTheme(themeName);
            
            // Update active theme button
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.theme-btn.${themeName}`).classList.add('active');
            
            // Force page refresh to ensure clean theme application
            setTimeout(() => {
                // Show notification
                notificationManager.show(`Đã chuyển sang ${themeName} theme!`, 'success');
                
                // Hide theme selector
                document.getElementById('themeSelector').style.display = 'none';
            }, 100);
        }
        
        // Enhanced notification function
        function showAlert(message, type) {
            notificationManager.show(message, type);
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                filterAndPaginateStudents();
            }
        }

        function nextPage() {
            const totalPages = Math.ceil(students.length / studentsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                filterAndPaginateStudents();
            }
        }

        function goToPage(page) {
            currentPage = page;
            filterAndPaginateStudents();
        }
    </script>
</body>
</html>
